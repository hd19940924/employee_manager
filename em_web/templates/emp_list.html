{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>员工管理</title>
    <link rel="stylesheet" href="{% static 'plugins/bootstrap-3.3.7-dist/css/bootstrap.css' %}">
</head>
<body>
<script rel="script" src="{% static 'js/jquery-3.2.1.js' %}"></script>
<script rel="script" src="{% static 'plugins/bootstrap-3.3.7-dist/js/bootstrap.js' %}"></script>
<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Employee Manager</a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="active"><a href="/dep_list/">员工管理 <span class="sr-only">(current)</span></a></li>
                <li><a href="#">Link</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#">登录</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">Dropdown <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Action</a></li>
                        <li><a href="#">Another action</a></li>
                        <li><a href="#">Something else here</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">Separated link</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container" >
    <div style="margin-bottom: 10px">
        <a class="btn btn-success" href="/emp_add/" target="_blank">
            <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
            新增员工
        </a>
        <a href="http://127.0.0.1:8000/download/" download>
  <button style="">下载示例文件</button>
</a>
        <a href="http://127.0.0.1:8000/download_employees/" download>
  <button>导出员工数据</button></a>

         <div style="float: right; width: 300px">
    <form method="get" action="">
        <div class="input-group">
            <label for="search"></label>
            <input type="text" id="search" name="search" class="form-control" placeholder="请输入员工名称 支持模糊查询" value="{{search}}">
            <span class="input-group-btn">
                <button class="btn btn-default" type="submit">
                    <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                </button>
            </span>
        </div>
    </form>
</div>
    </div>
    <div style="margin-bottom:50px " >
 <form method="POST" enctype="multipart/form-data" action="/upload_file/">
  {% csrf_token %}
  <input type="file" name="file" style="display: inline-block;">
  <button type="submit" style="display: inline-block; margin-top: 20px;">导入</button>
</form>
    </div>

    <div class="panel panel-default">
            <div class="panel-heading">
                <span class="glyphicon glyphicon-th" aria-hidden="true"></span>
                员工列表
            </div>
            <table class="table table-striped table-hover">
                <thead>
                <tr>
                    <th>员工ID</th>
                    <th>员工姓名</th>
                    <th>员工密码</th>
                    <th>员工年龄</th>
                    <th>账户余额</th>
                    <th>入职时间</th>
                    <th>员工性别</th>
                    <th>所属部门</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                {% for emp in emp_queryset %}
                <tr>
                    <td>{{emp.id}}</td>
                    <td>{{emp.name}}</td>
                    <td>{{emp.password}}</td>
                    <td>{{emp.age}}</td>
                    <td>{{emp.account}}</td>
                    <td>{{emp.create_time}}</td>
                    <td>{{emp.gender}}</td>
                    <td>{{emp.dep_id}}</td>
                    <td>
                        <a class="btn btn-primary btn-xs" href="/emp_update/?update_id={{ emp.id}}">编辑</a>
                        <a class="btn btn-danger btn-xs" href="/emp_del/?del_id={{emp.id}}">删除</a>
                    </td>
                </tr>
               {% endfor %}
                </tbody>
            </table>
        </div>
<div class="pagination">
    <span class="step-links">
         {% if emp_queryset.has_previous %}
            <a href="?page=1&per_page={{my_objects.paginator.per_page}}">&laquo; first</a>
            <a href="?page={{ my_objects.previous_page_number }}&per_page={{my_objects.paginator.per_page}}">&lsaquo; previous</a>
        {% endif %}

        <span class="current-page">
            Page {{ emp_queryset.number }} of {{ emp_queryset.paginator.num_pages }}
        </span>

        {% if emp_queryset.has_next %}
            <a href="?page={{ emp_queryset.next_page_number }}&per_page={{emp_queryset.paginator.per_page}}">next &rsaquo;</a>
            <a href="?page={{ emp_queryset.paginator.num_pages }}&per_page={{emp_queryset.paginator.per_page}}">last &raquo;</a>
        {% endif %}
    </span>

    <span class="page-sizes">
        <span class="total-count">
            Total: {{ emp_queryset.paginator.count }}
        </span>

       {% if emp_queryset.paginator.count >= emp_queryset.paginator.per_page %}
            <span class="page-size-select">
                Per page:
                <select name="page_size" onchange="window.location.href='?page=1&per_page=' + this.value;">
                    {% for size in page_sizes %}
                        {% if size == emp_queryset.paginator.per_page %}
                            <option value="{{ size }}" selected>{{ size }}</option>
                        {% else %}
                            <option value="{{ size }}">{{ size }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </span>
        {% endif %}
    </span>
</div>
</body>
<style>
.pagination {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 2rem 0;
  font-size: 0.9rem;
}

.pagination .step-links,
.pagination .page-sizes {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
}

.pagination .step-links a,
.pagination .step-links span.current-page,
.pagination .page-sizes span.total-count {
  display: inline-block;
  margin: 0 0.5rem;
  padding: 0.3rem 0.6rem;
  background-color: #f0f0f0;
  color: #333;
  border-radius: 2px;
  text-decoration: none;
}

.pagination .step-links a:hover,
.pagination .step-links span.current-page,
.pagination .page-sizes span.total-count {
  background-color: #333;
  color: #fff;
}

.pagination .page-sizes .page-size-select {
  margin-left: 1rem;
}

.pagination .page-sizes select {
  margin-left: 0.5rem;
  padding: 0.3rem 0.6rem;
  background-color: #f0f0f0;
  color: #333;
  border-radius: 2px;
  border: none;
  font-size: 0.9rem;
}</style>
</html>